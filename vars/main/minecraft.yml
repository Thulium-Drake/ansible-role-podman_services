---
# Minecraft server service container definitions

# Volume configuration
podman_volumes_minecraft:
  minecraft:
    - name: minecraft-data
      driver: "{{ podman_volume_driver }}"

# Network configuration
podman_networks_minecraft:
  minecraft: []

podman_service_containers_minecraft:
  minecraft:
    minecraft:
      image: "docker.io/itzg/minecraft-server:{{ minecraft_container_version }}"
      ports:
        - "{{ minecraft_port }}:25565/tcp"
        - "{{ minecraft_port }}:25565/udp"
      volumes:
        - "{{ service['name'] }}-data:/data:Z"
      env:
        EULA: "{{ minecraft_eula }}"
        VERSION: "{{ minecraft_version }}"
        TYPE: "{{ minecraft_type }}"
        MEMORY: "{{ minecraft_memory }}"
        DIFFICULTY: "{{ minecraft_difficulty }}"
        MAX_PLAYERS: "{{ minecraft_max_players }}"
        MOTD: "{{ minecraft_motd }}"
        SPAWN_PROTECTION: "{{ minecraft_spawn_protection }}"
      healthcheck: 'mc-monitor status --host localhost --port 25565'
